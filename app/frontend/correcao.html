<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CorreÃ§Ã£o de RedaÃ§Ãµes</title>
  <link rel="stylesheet" href="css/base.css">
   <link rel="stylesheet" href="css/ui-feedback.css">
<link rel="icon" href="logo1.png" type="image/png">
</head>
<body>

<!-- âœ… IMPORTANTE (checklist aplicado):
     - SÃ³ existe 1 #menuBtn e 1 #menuPanel nesta pÃ¡gina
     - Apenas 1 initMenuPerfil() no final
-->

<!-- ğŸ”¹ BotÃ£o do menu (canto superior) -->
<button id="menuBtn" class="menu-btn" title="Menu do perfil">â˜°</button>

<!-- ğŸ”¹ Painel oculto -->
<aside id="menuPanel" class="menu-panel">
  <div class="menu-header">
    <strong>Meu perfil</strong>
    <button id="menuCloseBtn" class="menu-close" title="Fechar">âœ•</button>
  </div>

  <div class="menu-body">
    <div class="menu-photo">
      <img id="menuPhotoImg" class="menu-photo-img" alt="Foto do perfil" />
      <label class="menu-photo-label">
        Alterar foto
        <input id="menuPhotoInput" type="file" accept="image/png,image/jpeg" />
      </label>
    </div>

    <p><strong>Nome:</strong> <span id="meName">...</span></p>
    <p><strong>E-mail:</strong> <span id="meEmail">...</span></p>
    <p><strong>Perfil:</strong> <span id="meRole">...</span></p>

    <hr>

    <h4>Atualizar dados</h4>
    <input id="newEmail" type="email" placeholder="Novo e-mail (opcional)" autocomplete="email" />
    <input id="newPass" type="password" placeholder="Nova senha (mÃ­n. 8) (opcional)" autocomplete="new-password" />
    <button id="saveProfileBtn">Salvar</button>

    <p id="menuStatus"></p>

    <hr>

    <button id="logoutMenuBtn">Sair</button>
    <button id="deleteAccountBtn" class="danger">Excluir conta</button>
  </div>
</aside>

<h2>CorreÃ§Ã£o de RedaÃ§Ãµes</h2>

<!-- âœ… tema da tarefa -->
<section class="task-header">
  <h3 id="taskTitle" style="margin:0;">Tema: â€”</h3>
  <p id="taskMeta" class="muted" style="margin:6px 0 0;"></p>
</section>

<hr>

<section>
  <h3>RedaÃ§Ãµes enviadas</h3>
  <ul id="essaysList" class="lista"></ul>
</section>

<hr>

<section id="correctionSection" style="display:none;">

  <div class="corr-top-actions">
  <button id="closeCorrectionBtn" type="button" class="secondary">
    Fechar correÃ§Ã£o
  </button>
</div>

  <img id="studentPhotoImg" alt="Foto do aluno" style="width:64px;height:64px;border-radius:50%;object-fit:cover;border:1px solid #ccc;display:none;" />
  <h3 id="studentName"></h3>
  <p id="studentEmail"></p>

  <h4>RedaÃ§Ã£o</h4>
  <p id="essayContent" class="box"></p>

  <h4>CorreÃ§Ã£o</h4>
  <p><strong>CompetÃªncias (0 a 200 cada)</strong></p>
  
<!-- âœ… Fichas de critÃ©rios (ENEM) -->
<div id="rubricTools" class="rubric-tools">
  <p class="rubric-tools-title"><strong>Ficha de critÃ©rios (ENEM)</strong></p>
 <p class="rubric-tools-sub">
  Clique em â€œVer fichaâ€ em cada competÃªncia para consultar os nÃ­veis (0â€“200).  
  <br>
  <em>A sugestÃ£o de nÃ­vel Ã© apenas uma referÃªncia â€” o professor pode atribuir qualquer valor entre 0 e 200.</em>
</p>

</div>

  <!-- C1 -->
<div class="comp-wrap">
  <div class="comp-head">
    <label for="c1"><strong>CompetÃªncia 1:</strong> DomÃ­nio da norma culta</label>
    <button type="button" class="rubric-btn" data-comp="c1" aria-expanded="false">
      Ver ficha
    </button>
  </div>

  <input type="number" id="c1" min="0" max="200" placeholder="0..200" />

  <div class="rubric-hint" id="hint-c1"></div>
  <div class="rubric-panel" id="rubric-c1" hidden></div>
</div>

<!-- C2 -->
<div class="comp-wrap">
  <div class="comp-head">
    <label for="c2"><strong>CompetÃªncia 2:</strong> CompreensÃ£o do tema e repertÃ³rio</label>
    <button type="button" class="rubric-btn" data-comp="c2" aria-expanded="false">
      Ver ficha
    </button>
  </div>

  <input type="number" id="c2" min="0" max="200" placeholder="0..200" />

  <div class="rubric-hint" id="hint-c2"></div>
  <div class="rubric-panel" id="rubric-c2" hidden></div>
</div>

<!-- C3 -->
<div class="comp-wrap">
  <div class="comp-head">
    <label for="c3"><strong>CompetÃªncia 3:</strong> ArgumentaÃ§Ã£o</label>
    <button type="button" class="rubric-btn" data-comp="c3" aria-expanded="false">
      Ver ficha
    </button>
  </div>

  <input type="number" id="c3" min="0" max="200" placeholder="0..200" />

  <div class="rubric-hint" id="hint-c3"></div>
  <div class="rubric-panel" id="rubric-c3" hidden></div>
</div>

<!-- C4 -->
<div class="comp-wrap">
  <div class="comp-head">
    <label for="c4"><strong>CompetÃªncia 4:</strong> CoesÃ£o e coerÃªncia</label>
    <button type="button" class="rubric-btn" data-comp="c4" aria-expanded="false">
      Ver ficha
    </button>
  </div>

  <input type="number" id="c4" min="0" max="200" placeholder="0..200" />

  <div class="rubric-hint" id="hint-c4"></div>
  <div class="rubric-panel" id="rubric-c4" hidden></div>
</div>

<!-- C5 -->
<div class="comp-wrap">
  <div class="comp-head">
    <label for="c5"><strong>CompetÃªncia 5:</strong> Proposta de intervenÃ§Ã£o</label>
    <button type="button" class="rubric-btn" data-comp="c5" aria-expanded="false">
      Ver ficha
    </button>
  </div>

  <input type="number" id="c5" min="0" max="200" placeholder="0..200" />

  <div class="rubric-hint" id="hint-c5"></div>
  <div class="rubric-panel" id="rubric-c5" hidden></div>
</div>


  <p><strong>Total:</strong> <span id="totalScore">â€”</span> / 1000</p>

  <textarea
    id="feedback"
    placeholder="Escreva o feedback aqui..."
    rows="6"
  ></textarea>

  <br><br>
  <button id="saveCorrectionBtn">Salvar correÃ§Ã£o</button>

  <p id="status"></p>
</section>

<script type="module" src="js/correcao.js"></script>

<script type="module">
  import { initMenuPerfil } from './js/menu-perfil.js';

  initMenuPerfil({
    loginRedirect: 'index.html',
    logoutRedirectProfessor: 'login-professor.html',
    logoutRedirectStudent: 'login-aluno.html'
  });
</script>
<script src="js/footer.js"></script>

</body>
</html>
